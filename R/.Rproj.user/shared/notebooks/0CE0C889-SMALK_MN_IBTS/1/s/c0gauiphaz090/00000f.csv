"0","tableau_sp_FM <- aggregate(CANoAtLngt ~ Species + Sex, data = tableau_donnees_filtrees, FUN = sum)"
"0","tableau_sp_FM <- tableau_sp_FM[order(tableau_sp_FM$Species),]"
"0",""
"0","#on créer deux colonnes F et M (pour Femelle et Male qui contiennent pour chaque ligne l'effectif (CANoAtLngt))"
"0","tableau_sp_F_M <- tableau_sp_FM %>%"
"0","  pivot_wider(names_from = Sex, values_from = CANoAtLngt)"
"0",""
"0",""
"0","is.na(tableau_sp_F_M$F)"
"1"," [1]"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1","
"
"0","is.na(tableau_sp_F_M$M)"
"1"," [1]"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1"," FALSE"
"1","
"
"0","#renomer les colonnes pour éviter les confusions avec FALSE"
"0","names(tableau_sp_F_M)[names(tableau_sp_F_M) == ""F""] <- ""Femelles"""
"0","names(tableau_sp_F_M)[names(tableau_sp_F_M) == ""M""] <- ""Males"""
"0",""
"0","#Calcul du SR"
"0","tableau_sp_SR <- mutate(tableau_sp_F_M, SR = Males/(Femelles + Males))"
"0","remove(tableau_sp_F_M)"
"0","#on arrondit à 3 chiffres après la virgules les valeurs de Sex-ratio pour chaque espèce"
"0","tableau_sp_SR$SR <- round(tableau_sp_SR$SR, digits=3)"
"0",""
"0","#Figures du SR pour chaque espèce "
"0","ggplot(tableau_sp_SR, aes(x = Species, y = SR)) +"
"0","  geom_bar(stat=""identity"", width=0.5) +"
"0","  geom_text(aes(label=SR), vjust=0, hjust = -0.05, size=3) +"
"0","  theme(legend.position = ""none"")  +"
"0","  ggtitle(""Sex ratio de chaque espèce (calculé sur toute les années d'obesravtion)"") +"
"0","  coord_flip()  "
